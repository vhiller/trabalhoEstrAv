package br.com.unisinos.estrav.dicionario.dictionary;

import java.io.BufferedReader;
import java.io.IOException;

import br.com.unisinos.estrav.dicionario.collections.AvlTree;
import br.com.unisinos.estrav.dicionario.collections.LinkedList;
import br.com.unisinos.estrav.dicionario.utils.FileHandler;

/**
 * Classe responsável por todas as operações relacionadas a manutenção e leitura
 * do dicionário.
 * 
 * @author Leonardo Faitão
 * @author Vinicius Hiller
 * 
 */
public class Translator {

	private AvlTree avlTree = new AvlTree();

	/**
	 * Traduz uma única palavra. Este método recebe como parâmetro a palavra a
	 * ser traduzida e retorna a lista das possíveis traduções para esta
	 * palavra.
	 */
	public LinkedList<String> translateWord(String word) {
		return avlTree.search(word).getKey().getDefinitions();
	}

	/**
	 * Insere uma nova definição no dicionário. Recebe como parâmetro a palavra
	 * em inglês e lista de possíveis traduções.
	 */
	public void insertWord(String word, LinkedList<String> definitions) {
		new Dictionary(word, definitions);
		// TODO Auto-generated method stub
	}

	/**
	 * Salva o arquivo de dicionário (dicionário.dat) com as respectivas
	 * definições baseado no conteúdo da árvore AVL
	 */
	public void saveDictionary(String filePath) {
		FileHandler.savaDictionaryFile(filePath, avlTree);
	}

	public void carregaDicionario(String filePath) throws IOException {
		BufferedReader bufferedReader = FileHandler
				.loadDictionaryFile(filePath);
		String line;
		while ((line = bufferedReader.readLine()) != null) {
			String[] split = line.split(FileHandler.SEPARADOR);
			String word = split[0];
			LinkedList<String> definitions = new LinkedList<>();
			for (int i = 1; i < split.length; i++) {
				definitions.addLast(split[i]);
			}
			avlTree.insert(new Dictionary(word, definitions));
		}
	}

}
